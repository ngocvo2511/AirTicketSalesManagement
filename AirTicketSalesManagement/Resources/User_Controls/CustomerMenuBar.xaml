<UserControl x:Class="AirTicketSalesManagement.Resources.User_Controls.CustomerMenuBar"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:local="clr-namespace:AirTicketSalesManagement.Resources.User_Controls"
                xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
                mc:Ignorable="d"
                d:DesignHeight="780"
                d:DesignWidth="250"
                TextElement.Foreground="{DynamicResource MaterialDesignBody}"
                TextElement.FontWeight="Regular"
                TextElement.FontSize="13"
                TextOptions.TextFormattingMode="Ideal"
                TextOptions.TextRenderingMode="Auto"
                FontFamily="{DynamicResource MaterialDesignFont}"
                Name="menuBar"
                xmlns:i="http://schemas.microsoft.com/xaml/behaviors">

    <UserControl.Resources>
        <!-- Matching gradient with main content -->
        <LinearGradientBrush x:Key="SidebarGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#667eea" Offset="0"/>
            <GradientStop Color="#764ba2" Offset="1"/>
        </LinearGradientBrush>

        <!-- Modern sidebar button style -->
        <Style x:Key="ModernSidebarButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="Margin" Value="8,4"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="White" Opacity="0.15"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="White" Opacity="0.25"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sub menu button style -->
        <Style x:Key="SubMenuButton" TargetType="Button" BasedOn="{StaticResource ModernSidebarButton}">
            <Setter Property="Padding" Value="25,10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="15,2"/>
        </Style>

        <!-- Expander style -->
        <Style x:Key="ModernExpander" TargetType="Expander">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Margin" Value="8,4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Expander">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="10">
                            <DockPanel>
                                <ToggleButton x:Name="HeaderSite"
                                              DockPanel.Dock="Top"
                                              IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                                              Background="Transparent"
                                              BorderThickness="0"
                                              Foreground="{TemplateBinding Foreground}"
                                              Padding="15,12"
                                              HorizontalAlignment="Stretch"
                                              HorizontalContentAlignment="Left">
                                    <ToggleButton.Template>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border x:Name="toggleBorder" 
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="10"
                                                    Padding="{TemplateBinding Padding}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <ContentPresenter Grid.Column="0"/>
                                                    <Icon:PackIconMaterial x:Name="expandIcon" 
                                                                           Grid.Column="1"
                                                                           Kind="ChevronDown" 
                                                                           Width="20" Height="20"
                                                                           Foreground="White"
                                                                           VerticalAlignment="Center"
                                                                           RenderTransformOrigin="0.5,0.5">
                                                        <Icon:PackIconMaterial.RenderTransform>
                                                            <RotateTransform Angle="0"/>
                                                        </Icon:PackIconMaterial.RenderTransform>
                                                    </Icon:PackIconMaterial>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="toggleBorder" Property="Background">
                                                        <Setter.Value>
                                                            <SolidColorBrush Color="White" Opacity="0.15"/>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Trigger>
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Setter TargetName="expandIcon" Property="RenderTransform">
                                                        <Setter.Value>
                                                            <RotateTransform Angle="180"/>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </ToggleButton.Template>
                                    <ContentPresenter ContentSource="Header"/>
                                </ToggleButton>
                                <ContentPresenter x:Name="ExpandSite"
                                                  DockPanel.Dock="Bottom"
                                                  Visibility="Collapsed"/>
                            </DockPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="True">
                                <Setter TargetName="ExpandSite" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Border Width="250" Background="{StaticResource SidebarGradient}">
            <Border.Effect>
                <DropShadowEffect Color="#000000" Opacity="0.1" ShadowDepth="5" BlurRadius="15"/>
            </Border.Effect>

            <DockPanel LastChildFill="True">

                <!-- Logout Button - Bottom -->
                <Button DockPanel.Dock="Bottom"
                        Style="{StaticResource ModernSidebarButton}"
                        Margin="8,20,8,25">
                    <StackPanel Orientation="Horizontal">
                        <Icon:PackIconMaterial Kind="Logout" Width="20" Height="20" 
                                               Margin="0,0,12,0" />
                        <TextBlock Text="Đăng xuất" VerticalAlignment="Center" FontWeight="Medium"/>
                    </StackPanel>
                </Button>

                <!-- Main Content -->
                <StackPanel Margin="0,20,0,0">
                    <!-- Logo Section -->
                    <Grid Margin="15,0,15,25">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Logo -->
                        <Border Grid.Column="0" 
                                Width="50" Height="50"
                                Background="White"
                                CornerRadius="12"
                                Padding="8">
                            <Border.Effect>
                                <DropShadowEffect Color="#000000" Opacity="0.1" ShadowDepth="2" BlurRadius="8"/>
                            </Border.Effect>
                            <Image Source="pack://application:,,,/Resources/Images/logo.png"
                                   Stretch="Uniform"/>
                        </Border>

                        <!-- App Name -->
                        <StackPanel Grid.Column="1" 
                                    Margin="12,0,0,0"
                                    VerticalAlignment="Center">
                            <TextBlock Text="FlyTogether" 
                                       FontWeight="Bold" 
                                       FontSize="16" 
                                       Foreground="White"/>
                            <TextBlock Text="Customer Portal" 
                                       FontSize="11" 
                                       Foreground="White" 
                                       Opacity="0.8"/>
                        </StackPanel>

                        <!-- Hamburger Menu -->
                        <ToggleButton Grid.Column="2"
                                      Style="{DynamicResource MaterialDesignHamburgerToggleButton}"
                                      Command="{Binding ToggleExpandCommand}"
                                      Foreground="White"
                                      Width="35" Height="35"/>
                    </Grid>

                    <!-- User Role Label -->
                    <Border Background="White"
                            CornerRadius="8"
                            Margin="15,0,15,20"
                            Padding="12,8">
                        <Border.Opacity>0.9</Border.Opacity>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Icon:PackIconMaterial Kind="Account" 
                                                   Width="16" Height="16"
                                                   Foreground="#667eea"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="Khách hàng" 
                                       FontWeight="SemiBold" 
                                       FontSize="14" 
                                       Foreground="#667eea"
                                       Margin="8,0,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Navigation Menu -->
                    <StackPanel>
                        <!-- Home -->
                        <Button Style="{StaticResource ModernSidebarButton}">
                            <StackPanel Orientation="Horizontal">
                                <Icon:PackIconMaterial Kind="Home" Width="20" Height="20" 
                                                       Margin="0,0,12,0" />
                                <TextBlock Text="Trang chủ" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Booking Section -->
                        <Expander Style="{StaticResource ModernExpander}">
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal">
                                    <Icon:PackIconMaterial Kind="TicketPercent" Width="20" Height="20" 
                                                           Margin="0,0,12,0"/>
                                    <TextBlock Text="Đặt vé" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Expander.Header>

                            <StackPanel Margin="0,8,0,8">
                                <Button Style="{StaticResource SubMenuButton}">
                                    <StackPanel Orientation="Horizontal">
                                        <Icon:PackIconMaterial Kind="Plus" Width="16" Height="16" 
                                                               Margin="0,0,10,0"/>
                                        <TextBlock Text="Đặt vé mới" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                                <Button Style="{StaticResource SubMenuButton}">
                                    <StackPanel Orientation="Horizontal">
                                        <Icon:PackIconMaterial Kind="History" Width="16" Height="16" 
                                                               Margin="0,0,10,0"/>
                                        <TextBlock Text="Lịch sử đặt vé" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Expander>

                        <!-- Profile -->
                        <Button Style="{StaticResource ModernSidebarButton}">
                            <StackPanel Orientation="Horizontal">
                                <Icon:PackIconMaterial Kind="AccountCircleOutline" Width="20" Height="20" 
                                                       Margin="0,0,12,0" />
                                <TextBlock Text="Thông tin cá nhân" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Flight Search -->
                        <Button Style="{StaticResource ModernSidebarButton}">
                            <StackPanel Orientation="Horizontal">
                                <Icon:PackIconMaterial Kind="Magnify" Width="20" Height="20" 
                                                       Margin="0,0,12,0" />
                                <TextBlock Text="Tra cứu lịch bay" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Support -->
                        <Button Style="{StaticResource ModernSidebarButton}">
                            <StackPanel Orientation="Horizontal">
                                <Icon:PackIconMaterial Kind="HelpCircleOutline" Width="20" Height="20" 
                                                       Margin="0,0,12,0" />
                                <TextBlock Text="Hỗ trợ" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>